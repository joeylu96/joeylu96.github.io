---
title: 处理机调度
author: joeylu
date: 2020-12-21 21:20:00 +0800
categories: [学习, 操作系统]
tags: [操作系统]
toc: false
---
# 处理机调度
**1.处理机调度概述:**  
&ensp;&ensp;&ensp;&ensp;处理机调度即CPU管理方法，不同的CPU管理方法提供不同性能的操作系统，一个好的操作系统
应该尽可能地使各作业搭配合理，充分利用系统中的各种资源。衡量操作系统的指标通常为：周转时间，吞吐率，响应时间和设备利用率。
计算过程是周转时间，接到命令到计算出答案并回答是响应时间。  

**2.调度的分级:**  
&ensp;&ensp;&ensp;&ensp;处理机调度可以分为4个级别：作业调度，交换调度，进程调度和线程调度。  
&ensp;&ensp;&ensp;&ensp;1.作业调度：又称宏观调度或高级调度，主要是按一定的原则对外存输入井中的后备作业进行选择，并给作业分配
内存和输入输出设备等必备资源，建立其对应的根进程，以使该作业的进程获得竞争处理机的权力。另外当作业执行完毕时，还负责回收系统资源。  
&ensp;&ensp;&ensp;&ensp;2.交换调度：按给定的原则和策略，将存于外存交换区中的就绪状态或等待状态的进程调入内存，或把内存就绪状态
或内存等待状态的进程交换到外存交换区，交换调度主要涉及内存的管理和扩充。  
&ensp;&ensp;&ensp;&ensp;3.进程调度，按某种方法选取一个处于就绪状态的进程占用处理机，在确定选取进程后，系统需进行进程上下文切换以建立
该进程的执行环境。  
&ensp;&ensp;&ensp;&ensp;4.线程调度，按照特定机制为多个线程分配CPU的使用权。  

**3.作业调度:**  
&ensp;&ensp;&ensp;&ensp;作业调度的主要功能：1.记录系统中各作业的状况，作业控制块（JCB）记录这些有关信息，主要包括作业名，作业类型，资源要求，
当前状态，资源使用情况和作业优先级。 2.从后备队列中选出一部分作业投入执行。 3.为被选中的作业做好执行前的准备工作，包括建立相应的进程，并为
该进程分配其所需要的系统资源，如内外存和外设等。 4.作业执行结束后进行善后处理。  

**4进程调度:**  
&ensp;&ensp;&ensp;&ensp;进程调度的主要功能：1.记录系统中所有进程的执行情况。 2.选择占有处理机的进程。 3.进行进程上下文切换。  
&ensp;&ensp;&ensp;&ensp;引起进程调度的原因为：1.正在执行的进程执行完毕。 2.执行中的进程自己调用阻塞原语将自己阻塞起来进入睡眠等待状态。 
3.执行中的进程自己调用P原语，从而因资源不足而被阻塞；或调用V原语激活了等待资源的进程队列。 4.进程提出IO请求后被阻塞。 5.分时系统中的时间片用完。 
6.执行完系统调用时，在系统进程返回用户进程时，可认为系统进程执行完毕，从而可调度选择一个新的用户进程执行。 7.就绪队列中的某进程优先级变的高于
当前执行进程的优先级。  

**5.调度算法:**  
&ensp;&ensp;&ensp;&ensp;常用的进程调度和作业调度算法为：  
&ensp;&ensp;&ensp;&ensp;1.先来先服务调度（FCFS），按用户作业和就绪进程的提交顺序或变为就绪状态的先后，进行先来先服务的调度处理。  
&ensp;&ensp;&ensp;&ensp;2.轮转法，让每个进程在就绪队列中的等待时间与享受服务的时间成比例，即将CPU的处理时间分为固定大小的时间片，
如果一个进程用完之后还未执行完成，则将其占用CPU释放，并排到就绪队列的末尾等待下一次调度执行。  
&ensp;&ensp;&ensp;&ensp;3.多级反馈轮转法，在轮转法中，加入到就绪队列的进程有三种。一是分给它的时间片用完，但进程还未完成，回到就绪
队列的末尾等待下次调度再继续执行；二是分给该进程的时间片并未用完，只是只是因为请求IO或由于进程的互斥与同步关系而被阻塞；三是新创进程
进入就绪队列。对于这三种情况区别对待，给予不同的优先级和时间片。综述就是，将进程按照到达就绪队列的类型和被阻塞时的原因分为不同优先级的队列，
各队列之间的进程优先级不同，但同一个队列内优先级相同。  
&ensp;&ensp;&ensp;&ensp;4.优先级法，确定进程或作业的优先级，来代表其拥有的调度优先权。大致分为两种:1.静态优先级：用户自行输入的或系统根据
作业进程类型和资源情况而分配的的优先级。2.动态优先级：根据进程占有CPU时间的长短或就绪进程等待CPU的时间长短来决定。  
&ensp;&ensp;&ensp;&ensp;5.最短作业优先级法（SJF），作业执行时间越短，优先级越高。执行时间较长的可能一直无法被执行。  
&ensp;&ensp;&ensp;&ensp;6.最高响应比优先法（HRN）：T,作业执行时间，W,就绪等待时间。R=1+W/T,R越大则优先级越高。算法位于FCFS与SJF之间。  